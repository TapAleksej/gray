–ù—É–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∏ –≤–Ω–µ–¥—Ä–∏—Ç—å Ansible-—Ä–æ–ª—å –¥–ª—è –æ—Ñ–ª–∞–π–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Graylog –Ω–∞ —Å–µ—Ä–≤–µ—Ä RedOS 7.3.4.

üëç –°–æ–∑–¥–∞—Ç—å Ansible-—Ä–æ–ª—å graylog_offline_install (–ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –º–æ–∂–Ω–æ –ª–∏–±–æ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –ª–∏–±–æ —á–µ—Ä–µ–∑ dnf), –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∞–º–æ–≥–æ graylog , —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ!
üëç–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å—ã, –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ–¥ —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, iptables –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ—Ä—Ç—ã. Grailog iptables –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã
üëç–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —á–µ—Ä–µ–∑ vars, –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å —É–ø—Ä–∞–≤–ª—è—Ç—å: –ø—É—Ç—è–º–∏, –ø–∞—Ä–æ–ª—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ–Ω—Ñ–∏–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å —Ä—è–¥–æ–º –≤ –ø–∞–ø–∫–µ templates.
üëç–í—Å–µ –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ –ø—É—Ç–∏ /var/log/, —Ç–∞–∫ –∂–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å logrotate - –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –±–æ–ª—å—à–µ 3 –Ω–µ–¥–µ–ª—å, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–∏–º–∏—Ç—ã –¥–ª—è —Ñ–∞–π–ª–æ–≤ –≤ 10–º–±, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—Ä—Ö–∏–≤–∞—Ü–∏—é.
üëç–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ UI graylog –Ω–∞ 443 –ø–æ—Ä—Ç, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—ã–ø—É—Å—Ç–∏—Ç—å —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π.
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–∞—à–±–æ—Ä–Ω—ã cpu,ram,disk,network –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ –∂–µ–ª–∞–Ω–∏—é. Dashboards
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω—Å–∏–±–ª —Ä–æ–ª—å, –∂–¥–µ–º, –∂–¥–µ–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞—à graylog.



# –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
/home/alrex/pro

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
–≤ defaults/main.yml –º–æ–≥—É—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ playbook
–¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ - –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞—Å–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
`run: false`

–ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
`uninstall: false`

–¢–æ–ª—å–∫–æ firewall
`firewall: true `


–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
```bash
ansible-playbook run.yml -e uninstall=true --ask-vault-pass
```

–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
ansible-playbook run.yml -e uninstall=true -e run=true --ask-vault-pass
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ firewall
```bash
ansible-playbook run.yml -e firewall=true --ask-vault-pass
```

```bash
ansible-playbook run.yml --tags metrica --ask-vault-pass
```


## –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ —Ñ–∞–π–ª—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ roles/rpm_files/


–°–æ–∑–¥–∞–Ω —Ä–µ–ø–æ /opt/graylog_repo

```bash
cat /etc/yum.repos.d/graylog-offline.repo
```


–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ–∫—Ä–µ—Ç
```bash
ansible-vault edit ./roles/graylog_offline_install/files/secrets.yml
```